<div class="change-password-container">
  <h2>Change Password</h2>

  <form [formGroup]="passwordForm" (ngSubmit)="onSubmit()" novalidate>
    <label>
      Current Password
      <input [type]="hideOld ? 'password' : 'text'" formControlName="oldPassword" placeholder="Enter current password" />
      <small *ngIf="oldPassword?.invalid && (oldPassword?.dirty || oldPassword?.touched)">
        Current password is required.
      </small>
      <button type="button" class="toggle-btn" (click)="hideOld = !hideOld">
        {{ hideOld ? 'Show' : 'Hide' }}
      </button>
    </label>

    <label>
      New Password
      <input [type]="hideNew ? 'password' : 'text'" formControlName="newPassword" placeholder="Enter new password" />
      <small *ngIf="newPassword?.invalid && (newPassword?.dirty || newPassword?.touched)">
        <span *ngIf="newPassword?.errors?.['required']">New password is required.</span>
        <span *ngIf="newPassword?.errors?.['minlength']">Minimum 6 characters required.</span>
      </small>
      <button type="button" class="toggle-btn" (click)="hideNew = !hideNew">
        {{ hideNew ? 'Show' : 'Hide' }}
      </button>
    </label>

    <label>
      Confirm New Password
      <input [type]="hideConfirm ? 'password' : 'text'" formControlName="confirmPassword" placeholder="Confirm new password" />
      <small *ngIf="(confirmPassword?.dirty || confirmPassword?.touched) && passwordForm.errors?.['mismatch']">
        Passwords do not match.
      </small>
      <button type="button" class="toggle-btn" (click)="hideConfirm = !hideConfirm">
        {{ hideConfirm ? 'Show' : 'Hide' }}
      </button>
    </label>

    <div class="buttons">
      <button type="submit" [disabled]="passwordForm.invalid">Change Password</button>
      <button type="button" class="secondary" (click)="onCancel()">Cancel</button>
    </div>
  </form>
</div>
